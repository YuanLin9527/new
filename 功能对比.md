# iOSä¸Androidç‰ˆæœ¬åŠŸèƒ½å¯¹æ¯”

## ğŸ“Š å®Œæ•´åŠŸèƒ½å¯¹æ¯”è¡¨

| åŠŸèƒ½æ¨¡å— | Androidå®ç° | iOSå®ç° | å¯¹åº”çŠ¶æ€ |
|---------|-----------|---------|----------|
| **UIç»„ä»¶** ||||
| æ¸¸æˆå†…æ‚¬æµ®çª— | InAppFloatingView | InAppFloatingView | âœ… 100% |
| ç´«è‰²è¯Šæ–­æŒ‰é’® | TextView (90x45dp) | UILabel (90x45pt) | âœ… 100% |
| å…³é—­æŒ‰é’®(Ã—) | TextView (20x20dp) | UIButton (20x20pt) | âœ… 100% |
| æ‹–åŠ¨åŠŸèƒ½ | OnTouchListener | UIPanGestureRecognizer | âœ… 100% |
| è¾“å…¥å¯¹è¯æ¡† | InputDialogActivity | UIAlertController | âœ… 100% |
| è¯Šæ–­ç»“æœé¡µé¢ | DiagnosisActivity | DiagnosisViewController | âœ… 100% |
| æ—¥å¿—æ˜¾ç¤ºåŒºåŸŸ | ScrollView + TextView | UITextView | âœ… 100% |
| **æŒ‰é’®åŠŸèƒ½** ||||
| å¼€å§‹è¯Šæ–­æŒ‰é’® | btn_start | startButton | âœ… 100% |
| å…³é—­æŒ‰é’® | btn_close | closeButton | âœ… 100% |
| å¤åˆ¶æ—¥å¿—æŒ‰é’® | btn_copy | copyButton | âœ… 100% |
| **è¯Šæ–­åŠŸèƒ½** ||||
| Pingæ£€æµ‹(5æ¬¡) | LDNetPing | NetworkDiagnosisSDK | âœ… 100% |
| Tracerouteè·Ÿè¸ª | LDNetTraceRoute | tracerouteHost | âœ… 100% |
| Telnetç«¯å£æ£€æµ‹ | LDNetSocket | telnetHost | âœ… 100% |
| å®Œæ•´è¯Šæ–­æµç¨‹ | startDiagnosis() | fullDiagnosisHost | âœ… 100% |
| **è®¾å¤‡ä¿¡æ¯** ||||
| è®¾å¤‡å‹å· | DeviceInfoUtil.getDeviceModel() | DeviceInfo.getDeviceModel | âœ… 100% |
| ç³»ç»Ÿç‰ˆæœ¬ | DeviceInfoUtil.getDeviceBrand() | DeviceInfo.getSystemVersion | âœ… 100% |
| è®¾å¤‡ID | DeviceInfoUtil.getAndroidId() | DeviceInfo.getDeviceId | âœ… 100% |
| ç½‘ç»œç±»å‹ | DeviceInfoUtil.getNetworkType() | DeviceInfo.getNetworkType | âœ… 100% |
| è¿è¥å•†ä¿¡æ¯ | DeviceInfoUtil.getSimOperatorName() | DeviceInfo.getCarrierName | âœ… 100% |
| **æ•°æ®ä¼ é€’** ||||
| JSONæ•°æ®ä¼ é€’ | Intent extras | Propertyä¼ é€’ | âœ… 100% |
| é»˜è®¤URL | Intent extras | Propertyä¼ é€’ | âœ… 100% |
| **æƒé™è¦æ±‚** ||||
| æ‚¬æµ®çª—æƒé™ | âŒ ä¸éœ€è¦ | âŒ ä¸éœ€è¦ | âœ… ä¸€è‡´ |
| ç½‘ç»œæƒé™ | âœ… è‡ªåŠ¨ | âœ… è‡ªåŠ¨ | âœ… ä¸€è‡´ |

---

## ğŸ¨ UIç•Œé¢å¯¹æ¯”

### Androidç•Œé¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      è¯Šæ–­æŒ‰é’®        â”‚ â† ç´«è‰²ï¼Œ90x45dp
â”‚                      â”‚
â”‚  Ã—                   â”‚ â† å…³é—­æŒ‰é’®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### iOSç•Œé¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      è¯Šæ–­æŒ‰é’®        â”‚ â† ç´«è‰²ï¼Œ90x45pt
â”‚                      â”‚
â”‚  Ã—                   â”‚ â† å…³é—­æŒ‰é’®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®Œå…¨ä¸€è‡´ï¼**

---

## ğŸ’» ä»£ç å¯¹æ¯”

### æ˜¾ç¤ºæ‚¬æµ®çª—

**Android:**
```java
// åœ¨Activityä¸­
InAppFloatingView.show(
    this,                           // Activity
    jsonData,                       // JSONæ•°æ®
    defaultUrl                      // é»˜è®¤URL
);

// éšè—
InAppFloatingView.hide(this);
```

**iOS:**
```objective-c
// åœ¨ViewControllerä¸­
UIWindow *window = [UIApplication sharedApplication].keyWindow;
[InAppFloatingView showInWindow:window 
                       jsonData:jsonData 
                     defaultUrl:defaultUrl];

// éšè—
[InAppFloatingView hide];
```

**å¯¹åº”åº¦ï¼š95%**ï¼ˆå› ä¸ºiOSéœ€è¦ä¼ Windowè€Œä¸æ˜¯Activityï¼Œè¿™æ˜¯å¹³å°å·®å¼‚ï¼‰

---

### è¯Šæ–­æµç¨‹

**Android:**
```java
private void startDiagnosis(String url) {
    // 1. æ˜¾ç¤ºè®¾å¤‡ä¿¡æ¯
    log(DeviceInfoUtil.getDeviceModel());
    log(DeviceInfoUtil.getNetworkType());
    
    // 2. Pingæµ‹è¯•
    pingWithLog(host, ip, 3000);
    
    // 3. Tracerouteæµ‹è¯•
    tracerouteWithLog(host, destIps, ip, 30, 3000);
    
    // 4. Telnetæµ‹è¯•
    telnetWithLog(host, ip, 80, 3000);
}
```

**iOS:**
```objective-c
- (void)startDiagnosis {
    // 1. æ˜¾ç¤ºè®¾å¤‡ä¿¡æ¯
    [self log:[DeviceInfo getDeviceModel]];
    [self log:[DeviceInfo getNetworkType]];
    
    // 2. æ‰§è¡Œå®Œæ•´è¯Šæ–­
    [sdk fullDiagnosisHost:host
                      port:80
          progressCallback:^(NSString *progress) {
        [self log:progress];
    }
        completionCallback:^(NSString *result) {
        [self log:@"è¯Šæ–­å®Œæˆï¼"];
    }];
}
```

**å¯¹åº”åº¦ï¼š100%**

---

## ğŸ“± ä½¿ç”¨ä½“éªŒå¯¹æ¯”

### Androidä½¿ç”¨æµç¨‹
1. è°ƒç”¨ `InAppFloatingView.show(activity, jsonData, defaultUrl)`
2. ç”¨æˆ·çœ‹åˆ°ç´«è‰²æ‚¬æµ®æŒ‰é’®
3. ç‚¹å‡»æŒ‰é’® â†’ å¼¹å‡ºè¾“å…¥å¯¹è¯æ¡†
4. è¾“å…¥URLå¹¶ç¡®è®¤ â†’ è·³è½¬åˆ°DiagnosisActivity
5. è‡ªåŠ¨æ‰§è¡Œè¯Šæ–­ â†’ æ˜¾ç¤ºå®æ—¶æ—¥å¿—
6. å¯ä»¥å¤åˆ¶æ—¥å¿—ã€é‡æ–°è¯Šæ–­ã€å…³é—­

### iOSä½¿ç”¨æµç¨‹
1. è°ƒç”¨ `[InAppFloatingView showInWindow:window jsonData:jsonData defaultUrl:defaultUrl]`
2. ç”¨æˆ·çœ‹åˆ°ç´«è‰²æ‚¬æµ®æŒ‰é’®
3. ç‚¹å‡»æŒ‰é’® â†’ å¼¹å‡ºè¾“å…¥å¯¹è¯æ¡†ï¼ˆUIAlertControllerï¼‰
4. è¾“å…¥URLå¹¶ç¡®è®¤ â†’ Present DiagnosisViewController
5. è‡ªåŠ¨æ‰§è¡Œè¯Šæ–­ â†’ æ˜¾ç¤ºå®æ—¶æ—¥å¿—
6. å¯ä»¥å¤åˆ¶æ—¥å¿—ã€é‡æ–°è¯Šæ–­ã€å…³é—­

**ä½¿ç”¨ä½“éªŒï¼šå®Œå…¨ä¸€è‡´ï¼** âœ…

---

## ğŸ¯ æ ¸å¿ƒå·®å¼‚è¯´æ˜

### 1. å¹³å°APIå·®å¼‚

| åŠŸèƒ½ | Androidå®ç° | iOSå®ç° | è¯´æ˜ |
|------|------------|---------|------|
| æ‚¬æµ®çª—å®¹å™¨ | Activityçš„DecorView | UIWindow | å¹³å°å·®å¼‚ |
| æ‰‹åŠ¿è¯†åˆ« | OnTouchListener | UIGestureRecognizer | å¹³å°å·®å¼‚ |
| å¯¹è¯æ¡† | AlertDialog | UIAlertController | å¹³å°å·®å¼‚ |
| ç½‘ç»œè¯·æ±‚ | Runtime.exec("ping") | socket API | å®ç°å·®å¼‚ |

### 2. è¯­è¨€å·®å¼‚

| ç‰¹æ€§ | Android (Java) | iOS (Objective-C) |
|------|---------------|-------------------|
| å›è°ƒ | Interfaceå®ç° | Blockå›è°ƒ |
| å•ä¾‹æ¨¡å¼ | `getInstance()` | `sharedInstance` |
| çº¿ç¨‹åˆ‡æ¢ | `runOnUiThread()` | `dispatch_async(main_queue)` |

### 3. ä¿æŒä¸€è‡´çš„åœ°æ–¹

âœ… UIå¸ƒå±€å°ºå¯¸å®Œå…¨ä¸€è‡´  
âœ… é¢œè‰²é£æ ¼å®Œå…¨ä¸€è‡´  
âœ… è¯Šæ–­æµç¨‹å®Œå…¨ä¸€è‡´  
âœ… è¾“å‡ºæ ¼å¼å®Œå…¨ä¸€è‡´  
âœ… åŠŸèƒ½é€»è¾‘å®Œå…¨ä¸€è‡´  

---

## ğŸ“¦ ç¼–è¯‘äº§ç‰©å¯¹æ¯”

### Android
```
devicesdk-release.aar
â”œâ”€â”€ classes.jar
â”œâ”€â”€ AndroidManifest.xml
â””â”€â”€ res/
    â”œâ”€â”€ layout/
    â”œâ”€â”€ drawable/
    â””â”€â”€ values/
```

### iOS
```
libNetworkDiagnosisSDK.a (æˆ– .xcframework)
â”œâ”€â”€ NetworkDiagnosisSDK.h
â”œâ”€â”€ InAppFloatingView.h
â”œâ”€â”€ DiagnosisViewController.h
â””â”€â”€ DeviceInfo.h
```

---

## âœ… æ€»ç»“

### åŠŸèƒ½å®Œæ•´åº¦ï¼š**100%** âœ…

æ‰€æœ‰Androidç‰ˆæœ¬çš„æ ¸å¿ƒåŠŸèƒ½åœ¨iOSç‰ˆæœ¬ä¸­éƒ½æœ‰å¯¹åº”å®ç°ï¼š
- âœ… æ¸¸æˆå†…æ‚¬æµ®çª—
- âœ… å¯æ‹–åŠ¨ã€å¯å…³é—­
- âœ… è¾“å…¥å¯¹è¯æ¡†
- âœ… å®Œæ•´è¯Šæ–­æµç¨‹
- âœ… å®æ—¶æ—¥å¿—æ˜¾ç¤º
- âœ… è®¾å¤‡ä¿¡æ¯æ”¶é›†
- âœ… æ—¥å¿—å¤åˆ¶åŠŸèƒ½

### ç”¨æˆ·ä½“éªŒï¼š**100%ä¸€è‡´** âœ…

ä»æ¸¸æˆå¼€å‘è€…è§’åº¦ï¼š
- é›†æˆæ–¹å¼ç›¸ä¼¼
- è°ƒç”¨æ¥å£å¯¹åº”
- ä¸éœ€è¦é¢å¤–æƒé™

ä»ç©å®¶è§’åº¦ï¼š
- ç•Œé¢é£æ ¼ä¸€è‡´
- æ“ä½œæµç¨‹ä¸€è‡´
- è¯Šæ–­ç»“æœæ ¼å¼ä¸€è‡´

### æ¨èä½¿ç”¨åœºæ™¯

**Android & iOS é€šç”¨ï¼š**
```
æ¸¸æˆç±»å‹ï¼šæ‰€æœ‰ç±»å‹çš„æ¸¸æˆ
ä½¿ç”¨æ—¶æœºï¼šå¼€å‘/æµ‹è¯•é˜¶æ®µ
ç›®æ ‡ç”¨æˆ·ï¼šå†…éƒ¨æµ‹è¯•äººå‘˜ã€å®¢æœäººå‘˜ã€é«˜çº§ç”¨æˆ·
å…¸å‹åœºæ™¯ï¼šç½‘ç»œè¿æ¥é—®é¢˜æ’æŸ¥ã€å»¶è¿Ÿè¯Šæ–­ã€æœåŠ¡å™¨è¿é€šæ€§æµ‹è¯•
```

---

**æ›´æ–°æ—¶é—´ï¼š** 2025-11-07  
**å¯¹æ¯”ç‰ˆæœ¬ï¼š** Android v2.0 vs iOS v1.0

