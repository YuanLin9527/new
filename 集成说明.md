# iOSç½‘ç»œè¯Šæ–­SDKé›†æˆè¯´æ˜

## ğŸ“¦ SDKç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªiOSå¹³å°çš„ç½‘ç»œè¯Šæ–­å·¥å…·SDKï¼Œ**å®Œå…¨å¯¹æ ‡Androidç‰ˆæœ¬çš„åŠŸèƒ½**ï¼Œæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- âœ… **æ¸¸æˆå†…æ‚¬æµ®çª—** - ç´«è‰²è¯Šæ–­æŒ‰é’®ï¼Œå¯æ‹–åŠ¨ï¼Œä¸éœ€è¦ç³»ç»Ÿæƒé™
- âœ… **Pingæ£€æµ‹** - è¿ç»­Ping 5æ¬¡ï¼Œè·å–ç½‘ç»œå»¶è¿Ÿå’Œä¸¢åŒ…ç‡
- âœ… **Tracerouteè·¯ç”±è·Ÿè¸ª** - è·Ÿè¸ªåˆ°ç›®æ ‡ä¸»æœºçš„ç½‘ç»œè·¯å¾„  
- âœ… **Telnetç«¯å£æ£€æµ‹** - æ£€æµ‹æŒ‡å®šç«¯å£æ˜¯å¦å¼€æ”¾
- âœ… **å®Œæ•´è¯Šæ–­** - ä¸€é”®æ‰§è¡Œæ‰€æœ‰è¯Šæ–­åŠŸèƒ½
- âœ… **è®¾å¤‡ä¿¡æ¯** - è‡ªåŠ¨æ”¶é›†è®¾å¤‡å‹å·ã€ç³»ç»Ÿç‰ˆæœ¬ã€ç½‘ç»œç±»å‹ç­‰
- âœ… **æ—¥å¿—å¤åˆ¶** - æ”¯æŒä¸€é”®å¤åˆ¶è¯Šæ–­ç»“æœ
- âœ… **è¾“å…¥å¯¹è¯æ¡†** - å¯è‡ªå®šä¹‰è¯Šæ–­URL

### ğŸ® ä½¿ç”¨åœºæ™¯
è·ŸAndroidç‰ˆæœ¬å®Œå…¨ä¸€æ ·çš„ä½¿ç”¨ä½“éªŒï¼š
1. æ¸¸æˆå¯åŠ¨ â†’ æ˜¾ç¤ºç´«è‰²æ‚¬æµ®æŒ‰é’®
2. ç‚¹å‡»æŒ‰é’® â†’ å¼¹å‡ºURLè¾“å…¥æ¡†
3. ç¡®è®¤è¯Šæ–­ â†’ è‡ªåŠ¨æ‰§è¡ŒPingã€Tracerouteã€Telnet
4. æŸ¥çœ‹ç»“æœ â†’ å¯å¤åˆ¶æ—¥å¿—ã€é‡æ–°è¯Šæ–­

## ğŸ”§ ç¼–è¯‘è¯´æ˜

### ç¯å¢ƒè¦æ±‚

- macOSç³»ç»Ÿ
- Xcodeå‘½ä»¤è¡Œå·¥å…·ï¼ˆCommand Line Toolsï¼‰
- iOS SDK

### æ£€æŸ¥ç¯å¢ƒ

```bash
# æ£€æŸ¥Xcodeå‘½ä»¤è¡Œå·¥å…·æ˜¯å¦å®‰è£…
xcode-select -p

# å¦‚æœæœªå®‰è£…ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…
xcode-select --install

# æŸ¥çœ‹å¯ç”¨çš„SDK
xcodebuild -showsdks
```

### ç¼–è¯‘æ­¥éª¤

#### æ–¹å¼1ï¼šå®Œæ•´ç¼–è¯‘ï¼ˆæ¨èï¼‰

ç”ŸæˆçœŸæœºç‰ˆã€æ¨¡æ‹Ÿå™¨ç‰ˆå’ŒXCFrameworké€šç”¨åº“ï¼š

```bash
cd iOS_NetworkDiagnosisSDK
chmod +x build.sh
./build.sh
```

ç¼–è¯‘äº§ç‰©ä½äº `build/` ç›®å½•ï¼š
- `build/device/libNetworkDiagnosisSDK.a` - çœŸæœºç‰ˆæœ¬
- `build/simulator/libNetworkDiagnosisSDK.a` - æ¨¡æ‹Ÿå™¨ç‰ˆæœ¬
- `build/NetworkDiagnosisSDK.xcframework` - é€šç”¨æ¡†æ¶ï¼ˆæ¨èï¼‰
- `build/NetworkDiagnosisSDK.h` - å¤´æ–‡ä»¶

#### æ–¹å¼2ï¼šç®€åŒ–ç¼–è¯‘

ä»…ç”ŸæˆçœŸæœºç‰ˆæœ¬ï¼š

```bash
cd iOS_NetworkDiagnosisSDK
chmod +x build_simple.sh
./build_simple.sh
```

ç¼–è¯‘äº§ç‰©ä½äº `output/` ç›®å½•ï¼š
- `output/libNetworkDiagnosisSDK.a` - çœŸæœºé™æ€åº“
- `output/NetworkDiagnosisSDK.h` - å¤´æ–‡ä»¶

## ğŸ“± é›†æˆåˆ°é¡¹ç›®

### æ–¹å¼1ï¼šä½¿ç”¨XCFrameworkï¼ˆæ¨èï¼‰

1. å°† `NetworkDiagnosisSDK.xcframework` æ‹–å…¥Xcodeé¡¹ç›®
2. åœ¨é¡¹ç›®è®¾ç½®ä¸­ï¼Œé€‰æ‹©Target â†’ General â†’ Frameworks, Libraries, and Embedded Content
3. ç¡®è®¤XCFrameworkå·²æ·»åŠ ï¼ŒEmbedæ–¹å¼é€‰æ‹© "Do Not Embed"

### æ–¹å¼2ï¼šä½¿ç”¨é™æ€åº“

1. å°† `libNetworkDiagnosisSDK.a` å’Œ `NetworkDiagnosisSDK.h` æ·»åŠ åˆ°é¡¹ç›®

2. åœ¨Xcodeé¡¹ç›®è®¾ç½®ä¸­ï¼š
   - Target â†’ Build Phases â†’ Link Binary With Libraries
   - ç‚¹å‡» "+" æ·»åŠ  `libNetworkDiagnosisSDK.a`

3. é…ç½®å¤´æ–‡ä»¶æœç´¢è·¯å¾„ï¼š
   - Target â†’ Build Settings â†’ Search Paths â†’ Header Search Paths
   - æ·»åŠ å¤´æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„è·¯å¾„

4. æ·»åŠ ç³»ç»Ÿæ¡†æ¶ä¾èµ–ï¼š
   - Target â†’ Build Phases â†’ Link Binary With Libraries
   - æ·»åŠ  `Foundation.framework`

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### å¿«é€Ÿå¼€å§‹ï¼ˆæ¨èæ–¹å¼ - è·ŸAndroidç‰ˆæœ¬ä¸€æ ·ï¼‰

#### 1. å¯¼å…¥å¤´æ–‡ä»¶

```objective-c
#import "InAppFloatingView.h"
```

#### 2. åœ¨æ¸¸æˆä¸»ç•Œé¢æ˜¾ç¤ºæ‚¬æµ®æŒ‰é’®

```objective-c
@implementation GameViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    
    // å‡†å¤‡æ•°æ®ï¼ˆå¯é€‰ï¼‰
    NSString *jsonData = @"{\"device_id\":\"12345\",\"user\":\"test\"}";
    NSString *defaultUrl = @"http://your-server.com";
    
    // âœ… æ˜¾ç¤ºæ‚¬æµ®è¯Šæ–­æŒ‰é’®ï¼ˆè·ŸAndroidçš„ InAppFloatingView.show() ä¸€æ ·ï¼‰
    UIWindow *window = [UIApplication sharedApplication].keyWindow;
    [InAppFloatingView showInWindow:window 
                           jsonData:jsonData 
                         defaultUrl:defaultUrl];
}

- (void)dealloc {
    // é¡µé¢é”€æ¯æ—¶éšè—æ‚¬æµ®çª—
    [InAppFloatingView hide];
}

@end
```

#### 3. å®Œæˆï¼

ç”¨æˆ·ç‚¹å‡»æ‚¬æµ®æŒ‰é’®åï¼Œä¼šè‡ªåŠ¨å¼¹å‡ºè¾“å…¥æ¡†ï¼Œç¡®è®¤åæ‰§è¡Œè¯Šæ–­ï¼Œè·ŸAndroidç‰ˆæœ¬çš„ä½“éªŒå®Œå…¨ä¸€è‡´ã€‚

---

### é«˜çº§ç”¨æ³•ï¼ˆç›´æ¥è°ƒç”¨è¯Šæ–­APIï¼‰

å¦‚æœä¸éœ€è¦æ‚¬æµ®çª—UIï¼Œä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨åº•å±‚SDKï¼š

#### 1. å¯¼å…¥å¤´æ–‡ä»¶

```objective-c
#import "NetworkDiagnosisSDK.h"
```

#### 2. Pingæ£€æµ‹ï¼ˆè¿ç»­5æ¬¡ï¼‰

```objective-c
NetworkDiagnosisSDK *sdk = [NetworkDiagnosisSDK sharedInstance];

[sdk pingHost:@"8.8.8.8" callback:^(NSString *result) {
    NSLog(@"Pingç»“æœ:\n%@", result);
    // åœ¨è¿™é‡Œæ›´æ–°UIæ˜¾ç¤ºç»“æœ
}];
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
===== Ping 8.8.8.8 =====
ç›®æ ‡IP: 8.8.8.8

ç¬¬1æ¬¡: 8.8.8.8, time=45.23 ms
ç¬¬2æ¬¡: 8.8.8.8, time=43.89 ms
ç¬¬3æ¬¡: 8.8.8.8, time=44.56 ms
ç¬¬4æ¬¡: 8.8.8.8, time=46.12 ms
ç¬¬5æ¬¡: 8.8.8.8, time=45.67 ms

----- ç»Ÿè®¡ä¿¡æ¯ -----
å‘é€: 5, æˆåŠŸ: 5, å¤±è´¥: 0
æœ€å°: 43.89 ms, æœ€å¤§: 46.12 ms, å¹³å‡: 45.09 ms
ä¸¢åŒ…ç‡: 0.0%
```

#### 3. Tracerouteè·¯ç”±è·Ÿè¸ª

```objective-c
[sdk tracerouteHost:@"www.baidu.com" 
    progressCallback:^(NSString *progress) {
        // å®æ—¶æ˜¾ç¤ºæ¯ä¸€è·³çš„ç»“æœ
        NSLog(@"%@", progress);
    }
    completionCallback:^(NSString *result) {
        // æ˜¾ç¤ºå®Œæ•´çš„è·¯ç”±è·Ÿè¸ªç»“æœ
        NSLog(@"å®Œæˆ:\n%@", result);
    }];
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
===== Traceroute www.baidu.com =====
ç›®æ ‡IP: 110.242.68.66
è·³æ•°		IPåœ°å€			å»¶è¿Ÿ
--------------------------------------------
1		192.168.1.1		2.34 ms
2		10.0.0.1		5.67 ms
3		61.144.56.1		15.23 ms
...
10		110.242.68.66		45.89 ms

è·¯ç”±è·Ÿè¸ªå®Œæˆ
```

#### 4. Telnetç«¯å£æ£€æµ‹

```objective-c
[sdk telnetHost:@"www.baidu.com" port:80 callback:^(NSString *result) {
    NSLog(@"Telnetç»“æœ:\n%@", result);
}];
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
===== Telnet www.baidu.com:80 =====
ç›®æ ‡IP: 110.242.68.66
ç«¯å£: 80

æ­£åœ¨è¿æ¥...
âœ… è¿æ¥æˆåŠŸï¼
è¿æ¥è€—æ—¶: 45.67 ms
ç«¯å£çŠ¶æ€: OPEN
```

#### 5. å®Œæ•´è¯Šæ–­ï¼ˆPing + Traceroute + Telnetï¼‰

```objective-c
[sdk fullDiagnosisHost:@"www.baidu.com"
                  port:80
      progressCallback:^(NSString *progress) {
          // å®æ—¶æ˜¾ç¤ºè¯Šæ–­è¿›åº¦
          NSLog(@"è¿›åº¦: %@", progress);
      }
    completionCallback:^(NSString *result) {
        // æ˜¾ç¤ºå®Œæ•´è¯Šæ–­æŠ¥å‘Š
        NSLog(@"è¯Šæ–­æŠ¥å‘Š:\n%@", result);
    }];
```

#### 6. å–æ¶ˆæ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡

```objective-c
[[NetworkDiagnosisSDK sharedInstance] cancelCurrentTask];
```

#### 7. è·å–SDKç‰ˆæœ¬

```objective-c
NSString *version = [NetworkDiagnosisSDK sdkVersion];
NSLog(@"SDKç‰ˆæœ¬: %@", version);
```

## ğŸ“ å®Œæ•´ç¤ºä¾‹ä»£ç 

åœ¨ViewControllerä¸­ä½¿ç”¨ï¼š

```objective-c
#import "ViewController.h"
#import "NetworkDiagnosisSDK.h"

@interface ViewController ()
@property (weak, nonatomic) IBOutlet UITextView *resultTextView;
@end

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];
}

// æ‰§è¡Œç½‘ç»œè¯Šæ–­
- (IBAction)startDiagnosis:(id)sender {
    self.resultTextView.text = @"æ­£åœ¨è¯Šæ–­...\n";
    
    NetworkDiagnosisSDK *sdk = [NetworkDiagnosisSDK sharedInstance];
    
    // æ‰§è¡Œå®Œæ•´è¯Šæ–­
    [sdk fullDiagnosisHost:@"www.baidu.com"
                      port:80
          progressCallback:^(NSString *progress) {
              // å®æ—¶æ›´æ–°UI
              dispatch_async(dispatch_get_main_queue(), ^{
                  self.resultTextView.text = [self.resultTextView.text 
                      stringByAppendingString:progress];
              });
          }
        completionCallback:^(NSString *result) {
            // æ˜¾ç¤ºå®Œæ•´ç»“æœ
            dispatch_async(dispatch_get_main_queue(), ^{
                self.resultTextView.text = result;
            });
        }];
}

// åªæ‰§è¡ŒPing
- (IBAction)pingOnly:(id)sender {
    NetworkDiagnosisSDK *sdk = [NetworkDiagnosisSDK sharedInstance];
    
    [sdk pingHost:@"8.8.8.8" callback:^(NSString *result) {
        dispatch_async(dispatch_get_main_queue(), ^{
            self.resultTextView.text = result;
        });
    }];
}

// åªæ‰§è¡ŒTelnet
- (IBAction)telnetOnly:(id)sender {
    NetworkDiagnosisSDK *sdk = [NetworkDiagnosisSDK sharedInstance];
    
    [sdk telnetHost:@"www.baidu.com" port:80 callback:^(NSString *result) {
        dispatch_async(dispatch_get_main_queue(), ^{
            self.resultTextView.text = result;
        });
    }];
}

@end
```

---

## ğŸ¨ UIç»„ä»¶è¯´æ˜

### InAppFloatingView - æ¸¸æˆå†…æ‚¬æµ®çª—

è·ŸAndroidç‰ˆæœ¬å®Œå…¨ä¸€è‡´çš„åŠŸèƒ½ï¼š

| æ–¹æ³• | è¯´æ˜ | å‚æ•° |
|------|------|------|
| `+ showInWindow:jsonData:defaultUrl:` | æ˜¾ç¤ºæ‚¬æµ®æŒ‰é’® | window: æ¸¸æˆçª—å£<br>jsonData: æ¸¸æˆæ•°æ®ï¼ˆå¯é€‰ï¼‰<br>defaultUrl: é»˜è®¤URL |
| `+ hide` | éšè—æ‚¬æµ®æŒ‰é’® | - |
| `+ restore` | æ¢å¤æ‚¬æµ®æŒ‰é’® | - |
| `+ isShowing` | æ˜¯å¦æ­£åœ¨æ˜¾ç¤º | - |

**UIç‰¹ç‚¹ï¼š**
- ç´«è‰²"è¯Šæ–­"æŒ‰é’®ï¼Œå°ºå¯¸90x45
- å³ä¸Šè§’çº¢è‰²å…³é—­æŒ‰é’®ï¼ˆÃ—ï¼‰
- å¯æ‹–åŠ¨åˆ°å±å¹•ä»»æ„ä½ç½®
- ç‚¹å‡»åå¼¹å‡ºè¾“å…¥å¯¹è¯æ¡†
- è‡ªåŠ¨æ‰§è¡Œè¯Šæ–­å¹¶æ˜¾ç¤ºç»“æœ

### DiagnosisViewController - è¯Šæ–­ç»“æœé¡µé¢

è‡ªåŠ¨æ˜¾ç¤ºçš„è¯Šæ–­ç»“æœç•Œé¢ï¼š
- æ˜¾ç¤ºè®¾å¤‡ä¿¡æ¯ï¼ˆå‹å·ã€ç³»ç»Ÿç‰ˆæœ¬ã€ç½‘ç»œç±»å‹ç­‰ï¼‰
- å®æ—¶æ˜¾ç¤ºè¯Šæ–­æ—¥å¿—
- æ”¯æŒæ»šåŠ¨æŸ¥çœ‹
- æä¾›"å¼€å§‹è¯Šæ–­"ã€"å…³é—­"ã€"å¤åˆ¶æ—¥å¿—"ä¸‰ä¸ªæŒ‰é’®

### DeviceInfo - è®¾å¤‡ä¿¡æ¯å·¥å…·ç±»

è‡ªåŠ¨æ”¶é›†çš„è®¾å¤‡ä¿¡æ¯ï¼š
- è®¾å¤‡å‹å·ï¼ˆiPhone 14 Proç­‰ï¼‰
- ç³»ç»Ÿç‰ˆæœ¬ï¼ˆiOS 16.0ç­‰ï¼‰
- è®¾å¤‡IDï¼ˆIDFVï¼‰
- ç½‘ç»œç±»å‹ï¼ˆWiFi/Cellularï¼‰
- è¿è¥å•†åç§°

---

## âš™ï¸ APIå‚è€ƒ

### NetworkDiagnosisSDK - åº•å±‚è¯Šæ–­API

å¦‚æœä¸ä½¿ç”¨UIï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨è¿™äº›æ–¹æ³•ï¼š

| æ–¹æ³• | è¯´æ˜ | å‚æ•° |
|------|------|------|
| `+ (instancetype)sharedInstance` | è·å–å•ä¾‹ | - |
| `+ (NSString *)sdkVersion` | è·å–ç‰ˆæœ¬å· | - |
| `- (void)pingHost:callback:` | Pingæ£€æµ‹ï¼ˆ5æ¬¡ï¼‰ | host: IPæˆ–åŸŸå<br>callback: ç»“æœå›è°ƒ |
| `- (void)pingHost:count:callback:` | Pingæ£€æµ‹ï¼ˆè‡ªå®šä¹‰æ¬¡æ•°ï¼‰ | host: IPæˆ–åŸŸå<br>count: æ¬¡æ•°<br>callback: ç»“æœå›è°ƒ |
| `- (void)tracerouteHost:progressCallback:completionCallback:` | è·¯ç”±è·Ÿè¸ª | host: IPæˆ–åŸŸå<br>progressCallback: è¿›åº¦å›è°ƒ<br>completionCallback: å®Œæˆå›è°ƒ |
| `- (void)telnetHost:port:callback:` | Telnetæ£€æµ‹ | host: IPæˆ–åŸŸå<br>port: ç«¯å£å·<br>callback: ç»“æœå›è°ƒ |
| `- (void)fullDiagnosisHost:port:progressCallback:completionCallback:` | å®Œæ•´è¯Šæ–­ | host: IPæˆ–åŸŸå<br>port: ç«¯å£å·<br>progressCallback: è¿›åº¦å›è°ƒ<br>completionCallback: å®Œæˆå›è°ƒ |
| `- (void)cancelCurrentTask` | å–æ¶ˆå½“å‰ä»»åŠ¡ | - |

### ä¸»è¦æ–¹æ³•ï¼ˆå·²åºŸå¼ƒï¼Œè¯·ä½¿ç”¨ä¸Šè¿°APIï¼‰

| æ–¹æ³• | è¯´æ˜ | å‚æ•° |
|------|------|------|
| `+ (instancetype)sharedInstance` | è·å–å•ä¾‹ | - |
| `+ (NSString *)sdkVersion` | è·å–ç‰ˆæœ¬å· | - |
| `- (void)pingHost:callback:` | Pingæ£€æµ‹ï¼ˆ5æ¬¡ï¼‰ | host: IPæˆ–åŸŸå<br>callback: ç»“æœå›è°ƒ |
| `- (void)pingHost:count:callback:` | Pingæ£€æµ‹ï¼ˆè‡ªå®šä¹‰æ¬¡æ•°ï¼‰ | host: IPæˆ–åŸŸå<br>count: æ¬¡æ•°<br>callback: ç»“æœå›è°ƒ |
| `- (void)tracerouteHost:progressCallback:completionCallback:` | è·¯ç”±è·Ÿè¸ª | host: IPæˆ–åŸŸå<br>progressCallback: è¿›åº¦å›è°ƒ<br>completionCallback: å®Œæˆå›è°ƒ |
| `- (void)telnetHost:port:callback:` | Telnetæ£€æµ‹ | host: IPæˆ–åŸŸå<br>port: ç«¯å£å·<br>callback: ç»“æœå›è°ƒ |
| `- (void)fullDiagnosisHost:port:progressCallback:completionCallback:` | å®Œæ•´è¯Šæ–­ | host: IPæˆ–åŸŸå<br>port: ç«¯å£å·<br>progressCallback: è¿›åº¦å›è°ƒ<br>completionCallback: å®Œæˆå›è°ƒ |
| `- (void)cancelCurrentTask` | å–æ¶ˆå½“å‰ä»»åŠ¡ | - |

### å›è°ƒç±»å‹

```objective-c
// ç»“æœå›è°ƒ
typedef void(^NetworkDiagnosisCallback)(NSString *result);

// è¿›åº¦å›è°ƒ
typedef void(^NetworkDiagnosisProgressCallback)(NSString *progress);
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æƒé™è¦æ±‚

iOSåº”ç”¨éœ€è¦åœ¨Info.plistä¸­æ·»åŠ ç½‘ç»œæƒé™ï¼ˆé»˜è®¤å·²æœ‰ï¼‰ï¼š

```xml
<key>NSAppTransportSecurity</key>
<dict>
    <key>NSAllowsArbitraryLoads</key>
    <true/>
</dict>
```

### 2. çº¿ç¨‹å®‰å…¨

- æ‰€æœ‰SDKæ–¹æ³•éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„
- å›è°ƒä¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œå¯ä»¥ç›´æ¥æ›´æ–°UI

### 3. æ€§èƒ½å»ºè®®

- Pingå’ŒTracerouteæ˜¯è€—æ—¶æ“ä½œï¼Œå»ºè®®åœ¨åå°çº¿ç¨‹è°ƒç”¨
- é¿å…åŒæ—¶æ‰§è¡Œå¤šä¸ªè¯Šæ–­ä»»åŠ¡
- ä½¿ç”¨ `cancelCurrentTask` å¯ä»¥å–æ¶ˆæ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡

### 4. ç½‘ç»œé™åˆ¶

- iOSè®¾å¤‡éœ€è¦æœ‰ç½‘ç»œè¿æ¥
- æŸäº›ä¼ä¸šç½‘ç»œæˆ–é˜²ç«å¢™å¯èƒ½ä¼šé˜»æ­¢ICMPåŒ…ï¼ˆå½±å“Pingå’ŒTracerouteï¼‰
- Telnetæ£€æµ‹ä¾èµ–TCPè¿æ¥ï¼Œä¸å—ICMPé™åˆ¶

### 5. çœŸæœºæµ‹è¯•

- ICMPåŠŸèƒ½åœ¨iOSæ¨¡æ‹Ÿå™¨ä¸Šå—é™ï¼Œå»ºè®®åœ¨çœŸæœºä¸Šæµ‹è¯•
- æŸäº›ç½‘ç»œåŠŸèƒ½éœ€è¦çœŸæœºç¯å¢ƒæ‰èƒ½æ­£å¸¸å·¥ä½œ

## ğŸ“‚ æ–‡ä»¶æ¸…å•

```
iOS_NetworkDiagnosisSDK/
â”œâ”€â”€ NetworkDiagnosisSDK.h          # SDKåº•å±‚APIå¤´æ–‡ä»¶
â”œâ”€â”€ NetworkDiagnosisSDK.m          # SDKåº•å±‚APIå®ç°
â”œâ”€â”€ InAppFloatingView.h            # æ¸¸æˆå†…æ‚¬æµ®çª—å¤´æ–‡ä»¶ï¼ˆä¸»è¦ä½¿ç”¨ï¼‰
â”œâ”€â”€ InAppFloatingView.m            # æ¸¸æˆå†…æ‚¬æµ®çª—å®ç°
â”œâ”€â”€ DiagnosisViewController.h      # è¯Šæ–­ç»“æœé¡µé¢å¤´æ–‡ä»¶
â”œâ”€â”€ DiagnosisViewController.m      # è¯Šæ–­ç»“æœé¡µé¢å®ç°
â”œâ”€â”€ DeviceInfo.h                   # è®¾å¤‡ä¿¡æ¯å·¥å…·å¤´æ–‡ä»¶
â”œâ”€â”€ DeviceInfo.m                   # è®¾å¤‡ä¿¡æ¯å·¥å…·å®ç°
â”œâ”€â”€ build.sh                       # å®Œæ•´ç¼–è¯‘è„šæœ¬
â”œâ”€â”€ build_simple.sh                # ç®€åŒ–ç¼–è¯‘è„šæœ¬ï¼ˆå·²åºŸå¼ƒï¼‰
â”œâ”€â”€ TestDemo.m                     # åº•å±‚APIæµ‹è¯•ç¤ºä¾‹
â”œâ”€â”€ ä½¿ç”¨ç¤ºä¾‹.m                     # å®Œæ•´UIä½¿ç”¨ç¤ºä¾‹ï¼ˆæ¨èï¼‰
â”œâ”€â”€ é›†æˆè¯´æ˜.md                    # æœ¬æ–‡æ¡£
â”œâ”€â”€ README.md                      # é¡¹ç›®è¯´æ˜
â””â”€â”€ build/                         # ç¼–è¯‘è¾“å‡ºç›®å½•ï¼ˆç¼–è¯‘åç”Ÿæˆï¼‰
    â”œâ”€â”€ device/                    # çœŸæœºç‰ˆæœ¬
    â”‚   â””â”€â”€ libNetworkDiagnosisSDK.a
    â”œâ”€â”€ simulator/                 # æ¨¡æ‹Ÿå™¨ç‰ˆæœ¬
    â”‚   â””â”€â”€ libNetworkDiagnosisSDK.a
    â”œâ”€â”€ NetworkDiagnosisSDK.xcframework  # é€šç”¨æ¡†æ¶ï¼ˆæ¨èï¼‰
    â”œâ”€â”€ NetworkDiagnosisSDK.h      # åº•å±‚APIå¤´æ–‡ä»¶
    â”œâ”€â”€ InAppFloatingView.h        # æ‚¬æµ®çª—å¤´æ–‡ä»¶ï¼ˆä¸»è¦ï¼‰
    â”œâ”€â”€ DiagnosisViewController.h  # è¯Šæ–­é¡µé¢å¤´æ–‡ä»¶
    â””â”€â”€ DeviceInfo.h               # è®¾å¤‡ä¿¡æ¯å¤´æ–‡ä»¶
```

## ğŸ” æ•…éšœæ’æŸ¥

### ç¼–è¯‘é”™è¯¯

**é—®é¢˜ï¼š** `xcrun: error: unable to find utility "clang"`

**è§£å†³ï¼š** å®‰è£…Xcodeå‘½ä»¤è¡Œå·¥å…·
```bash
xcode-select --install
```

**é—®é¢˜ï¼š** `ld: library not found`

**è§£å†³ï¼š** æ£€æŸ¥Build Settingsä¸­çš„Library Search Pathsè®¾ç½®

### è¿è¡Œæ—¶é”™è¯¯

**é—®é¢˜ï¼š** DNSè§£æå¤±è´¥

**è§£å†³ï¼š** 
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ç¡®è®¤åŸŸåæ‹¼å†™æ­£ç¡®
- å°è¯•ä½¿ç”¨IPåœ°å€ä»£æ›¿åŸŸå

**é—®é¢˜ï¼š** Ping/Tracerouteæ— å“åº”

**è§£å†³ï¼š**
- åœ¨çœŸæœºä¸Šæµ‹è¯•ï¼ˆæ¨¡æ‹Ÿå™¨å—é™ï¼‰
- æ£€æŸ¥ç›®æ ‡ä¸»æœºæ˜¯å¦å…è®¸ICMP
- ä½¿ç”¨TelnetåŠŸèƒ½ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆ

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. Xcodeç‰ˆæœ¬æ˜¯å¦æ”¯æŒå½“å‰iOS SDK
2. ç¼–è¯‘è„šæœ¬æ˜¯å¦æœ‰æ‰§è¡Œæƒé™
3. å¤´æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®é…ç½®
4. ç³»ç»Ÿæ¡†æ¶æ˜¯å¦æ­£ç¡®é“¾æ¥

## ğŸ”„ ä¸Androidç‰ˆæœ¬å¯¹æ¯”

| åŠŸèƒ½ | Androidç‰ˆæœ¬ | iOSç‰ˆæœ¬ | è¯´æ˜ |
|------|-------------|---------|------|
| æ¸¸æˆå†…æ‚¬æµ®çª— | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| æ‹–åŠ¨åŠŸèƒ½ | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| å…³é—­æŒ‰é’® | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| è¾“å…¥å¯¹è¯æ¡† | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| Pingæ£€æµ‹ | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| Tracerouteè·Ÿè¸ª | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| Telnetç«¯å£æ£€æµ‹ | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| è®¾å¤‡ä¿¡æ¯æ˜¾ç¤º | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| æ—¥å¿—å¤åˆ¶ | âœ… | âœ… | å®Œå…¨ä¸€è‡´ |
| ç³»ç»Ÿæƒé™ | âŒ ä¸éœ€è¦ | âŒ ä¸éœ€è¦ | éƒ½æ˜¯æ¸¸æˆå†…æ‚¬æµ®çª— |

**è°ƒç”¨æ–¹å¼å¯¹æ¯”ï¼š**

```java
// Android
InAppFloatingView.show(activity, jsonData, defaultUrl);
InAppFloatingView.hide(activity);
```

```objective-c
// iOS
[InAppFloatingView showInWindow:window jsonData:jsonData defaultUrl:defaultUrl];
[InAppFloatingView hide];
```

å®Œå…¨å¯¹åº”ï¼

---

## ğŸ“„ ç‰ˆæœ¬ä¿¡æ¯

- **SDKç‰ˆæœ¬ï¼š** 1.0.0
- **æœ€ä½æ”¯æŒiOSç‰ˆæœ¬ï¼š** iOS 9.0+
- **å¼€å‘è¯­è¨€ï¼š** Objective-C
- **ç¼–è¯‘äº§ç‰©ï¼š** é™æ€åº“ (.a) / XCFramework
- **åŠŸèƒ½å¯¹æ ‡ï¼š** Androidç‰ˆæœ¬ 100%åŠŸèƒ½å¯¹ç­‰

---

**æ–‡æ¡£æ›´æ–°æ—¶é—´ï¼š** 2025-11-07

